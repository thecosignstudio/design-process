!function(){"use strict";var s=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,a=!1,r=void 0;try{for(var c,o=t[Symbol.iterator]();!(i=(c=o.next()).done)&&(n.push(c.value),!e||n.length!==e);i=!0);}catch(t){a=!0,r=t}finally{try{!i&&o.return&&o.return()}finally{if(a)throw r}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function a(t){var e,n=t.text().replace("/chapters/",""),i=n.split("-"),a=s(i,1)[0],r=n.split("#"),c=s(r,2)[1],o=(e=c,e.charAt(0).toUpperCase()+e.slice(1)).split("-").join(" ");t.text(o).prepend('<span class="chapter-number">'+a+"</span>")}var r=function(t){var e=t.attr("href"),n=e.slice(1,e.length);t.attr("href","/chapters/"+n)};function c(){var c=$(".subnav"),t=$(".chapter-toggle, .chapter-nav__listing ul li a"),o=$(".chapter-nav__listing"),s=o.find("li").toArray(),l=$(".subnav__chapters-container"),h=l.find(".chapter-number").text();t.click(function(){if(!c.hasClass("animating")){var e,t=l.hasClass("subnav__chapters-container--active"),n=t?0:400,i=t?750:0,a=t?750:150,r=t?850:0;c.addClass("animating"),setTimeout(function(){var e;l.toggleClass("subnav__chapters-container--active"),setTimeout(function(){o.toggleClass("chapter-nav__listing--active")},750),setTimeout(function(){c.toggleClass("subnav--small-padding")},a),e=t,setTimeout(function(){if(!e)return l.css({top:"8rem",left:"initial",marginLeft:0,width:"100%"}),setTimeout(function(){return l.css("position","static")},250);l.css({position:"absolute",left:0,marginLeft:"3.1rem",width:"calc(100% - 3.1rem - 15px"});var t=s.reduce(function(t,e){return $(e).find(".chapter-number").text()===h?$(e).position().top-30:t},null);return l.css("top",t)},i)},n),e=t,setTimeout(function(){var t=s.filter(function(t){return $(t).find(".chapter-number").text()!==h});e?t.map(function(t,e,n){return setTimeout(function(){$(t).addClass("chapter-nav__listing-element--visible"),e===n.length-1&&c.removeClass("animating")},150*e)}):($(t).removeClass("chapter-nav__listing-element--visible"),c.removeClass("animating"))},r)}})}function t(){var t,e,n,i;t=$(".js-toc-chapters"),e=$(".js-toc"),n=$(".js-toc-chapter-title"),i=$(".js-toc-all-chapters"),t.toc({container:".nav",selectors:"h1",highlightOnScroll:!1,smoothScrolling:!1,anchorName:function(t,e){return $(e).text().replace("/chapters/","")}}),t.find("a").each(function(){var t=$(this);a(t),r(t)}),e.toc({container:".chapter",selectors:"h1, h2",highlightOnScroll:!0,smoothScrolling:!1}),e.find(".toc-h2 a").click(function(t){t.preventDefault();var e=$($(this).attr("href")).offset().top;$("html, body").animate({scrollTop:e-32},300)}),e.find(".toc-h1 a").click(function(t){t.preventDefault(),$("html, body").animate({scrollTop:0},300)}),n.toc({container:".chapter",selectors:"h1",highlightOnScroll:!1}),i.toc({container:".nav",selectors:"h1",highlightOnScroll:!1,smoothScrolling:!1,anchorName:function(t,e){return $(e).text().replace("/chapters/","")}}),i.find("a").each(function(){var t=$(this);a(t),r(t)}),i.find(".toc-h1").each(function(){if($(this).find(".chapter-number").text()===$(".subnav__mobile .chapter-number").text()){var t=$(this).find(".chapter-number").text();$(this).empty().toc({container:".chapter",selectors:"h1, h2",highlightOnScroll:!0,smoothScrolling:!1}).addClass("chapter-sidebar__current-chapter").find(".toc-h1 a").prepend('<span class="chapter-number">'+t+"</span>"),$(this).find(".toc-h1 a").click(function(t){t.preventDefault(),$("html, body").animate({scrollTop:0},300)}),$(this).find(".toc-h2 a").click(function(t){t.preventDefault();var e=$(".subnav").height(),n=$($(this).attr("href")).offset().top;$("html, body").animate({scrollTop:n-e-30},300)})}}),c(),function(){var i=$(".subnav"),a=$(".chapter-sidebar");function t(t){var e=$(window).scrollTop(),n=$("body").data("scroll");i.toggleClass("subnav--active"),a.toggleClass("chapter-sidebar--active"),i.hasClass("subnav--active")?($("body").css("position","static"),t&&window.scrollTo(n,n)):($("body").data("scroll",e),$("body").css("position","fixed"))}$(".js-subnav-mobile-sidebar-toggle, .js-chapter-sidebar-close").click(function(){t(!0)}),$(".chapter-sidebar ul li a").click(t)}()}var e=".chapter :header:not(h5):not(h1)";function n(){$(e).filter(":visible").each(function(){var t=window.location.href.split("#"),e='<button class="clipboard-btn hide" data-clipboard-text="'+s(t,1)[0]+"#"+$(this).text().replace(/:|\?|'|\/|’|&|–|\(|\)/g,"").toLowerCase().replace(/ /g,"-")+'">\n      <img src="../assets/svgs/link.svg" class="clipboard-btn__icon">\n      <div class="clipboard-btn__text"></div>\n    </button>';$(this).append(e)}),new Clipboard(".clipboard-btn"),$(e).hover(function(){$(this).find(".clipboard-btn__text").text("Copied!"),$(this).find(".clipboard-btn").removeClass("hide")},function(){$(this).find(".clipboard-btn").addClass("hide"),$(".clipboard-btn__text").removeClass("clipboard-btn__text--visible")}),$(".clipboard-btn").click(function(){$(".clipboard-btn__text").addClass("clipboard-btn__text--visible")})}$(document).ready(function(){n(),t(),$(window).click(function(){$("#selectionSharerPopover").hide()}),$(".chapter p").selectionSharer(),$(".chapter .content-img").baselineElement(32)})}();