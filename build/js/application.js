!function(){"use strict";function t(t){return t.charAt(0).toUpperCase()+t.slice(1)}function n(n){var e=n.text().replace("/chapters/",""),i=e.split("-"),a=s(i,1)[0],r=e.split("#"),c=t(s(r,2)[1]).split("-").join(" ");n.text(c).prepend('<span class="chapter-number">'+a+"</span>")}function e(){var t=$(".js-toc-chapters"),e=$(".js-toc"),i=$(".js-toc-chapter-title"),a=$(".js-toc-all-chapters");t.toc({container:".nav",selectors:"h1",highlightOnScroll:!1,smoothScrolling:!1,anchorName:function(t,n){return $(n).text().replace("/chapters/","")}}),t.find("a").each(function(){var t=$(this);n(t),l(t)}),e.toc({container:".chapter",selectors:"h1, h2",highlightOnScroll:!0,smoothScrolling:!1}),e.find(".toc-h2 a").click(function(t){t.preventDefault();var n=$($(this).attr("href")).offset().top;$("html, body").animate({scrollTop:n-32},300)}),e.find(".toc-h1 a").click(function(t){t.preventDefault(),$("html, body").animate({scrollTop:0},300)}),i.toc({container:".chapter",selectors:"h1",highlightOnScroll:!1}),a.toc({container:".nav",selectors:"h1",highlightOnScroll:!1,smoothScrolling:!1,anchorName:function(t,n){return $(n).text().replace("/chapters/","")}}),a.find("a").each(function(){var t=$(this);n(t),l(t)}),a.find(".toc-h1").each(function(){if($(this).find(".chapter-number").text()===$(".subnav__mobile .chapter-number").text()){var t=$(this).find(".chapter-number").text();$(this).empty().toc({container:".chapter",selectors:"h1, h2",highlightOnScroll:!0,smoothScrolling:!1}).addClass("chapter-sidebar__current-chapter").find(".toc-h1 a").prepend('<span class="chapter-number">'+t+"</span>"),$(this).find(".toc-h1 a").click(function(t){t.preventDefault(),$("html, body").animate({scrollTop:0},300)}),$(this).find(".toc-h2 a").click(function(t){t.preventDefault();var n=$(".subnav").height(),e=$($(this).attr("href")).offset().top;$("html, body").animate({scrollTop:e-n-30},300)})}})}function i(){function t(t){setTimeout(function(){r.toggleClass("chapter-nav__listing--active")},t)}function n(t){setTimeout(function(){i.toggleClass("subnav--small-padding")},t)}function e(t,n){setTimeout(function(){var t=c.filter(function(t){return $(t).find(".chapter-number").text()!==s});n?t.map(function(t,n,e){return setTimeout(function(){$(t).addClass("chapter-nav__listing-element--visible"),n===e.length-1&&i.removeClass("animating")},n*l)}):($(t).removeClass("chapter-nav__listing-element--visible"),i.removeClass("animating"))},t)}var i=$(".subnav"),a=$(".chapter-toggle, .chapter-nav__listing ul li a"),r=$(".chapter-nav__listing"),c=r.find("li").toArray(),o=$(".subnav__chapters-container"),s=o.find(".chapter-number").text(),l=150,h=function(t,n){setTimeout(function(){if(!n)return o.css({top:"8rem",left:"initial",marginLeft:0,width:"100%"}),setTimeout(function(){return o.css("position","static")},250);o.css({position:"absolute",left:0,marginLeft:"3.1rem",width:"calc(100% - 3.1rem - 15px"});var t=c.reduce(function(t,n){return $(n).find(".chapter-number").text()===s?$(n).position().top-30:t},null);return o.css("top",t)},t)};a.click(function(){if(!i.hasClass("animating")){var a=o.hasClass("subnav__chapters-container--active"),r=a?0:l+250,c=a?750:0,s=a?750:l,u=a?850:0;i.addClass("animating"),setTimeout(function(){o.toggleClass("subnav__chapters-container--active"),t(750),n(s),h(c,a)},r),e(u,a)}})}function a(){function t(t){var i=$(window).scrollTop(),a=$("body").data("scroll");n.toggleClass("subnav--active"),e.toggleClass("chapter-sidebar--active"),n.hasClass("subnav--active")?($("body").css("position","static"),t&&window.scrollTo(a,a)):($("body").data("scroll",i),$("body").css("position","fixed"))}var n=$(".subnav"),e=$(".chapter-sidebar");$(".js-subnav-mobile-sidebar-toggle, .js-chapter-sidebar-close").click(function(){t(!0)}),$(".chapter-sidebar ul li a").click(t)}function r(){e(),i(),a()}function c(){u(),new Clipboard(".clipboard-btn"),$(h).hover(function(){$(this).find(".clipboard-btn__text").text("Copied!"),$(this).find(".clipboard-btn").removeClass("hide")},function(){$(this).find(".clipboard-btn").addClass("hide"),$(".clipboard-btn__text").removeClass("clipboard-btn__text--visible")}),$(".clipboard-btn").click(function(){$(".clipboard-btn__text").addClass("clipboard-btn__text--visible")})}function o(){$(window).click(function(){$("#selectionSharerPopover").hide()})}var s=function(){function t(t,n){var e=[],i=!0,a=!1,r=void 0;try{for(var c,o=t[Symbol.iterator]();!(i=(c=o.next()).done)&&(e.push(c.value),!n||e.length!==n);i=!0);}catch(t){a=!0,r=t}finally{try{!i&&o.return&&o.return()}finally{if(a)throw r}}return e}return function(n,e){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return t(n,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(t){var n=t.attr("href"),e=n.slice(1,n.length);t.attr("href","/chapters/"+e)},h=".chapter :header:not(h5):not(h1)",u=function(){$(h).filter(":visible").each(function(){var t=window.location.href.split("#"),n='<button class="clipboard-btn hide" data-clipboard-text="'+(s(t,1)[0]+"#"+$(this).text().replace(/:|\?|'|\/|’|&|–|\(|\)/g,"").toLowerCase().replace(/ /g,"-"))+'">\n      <img src="../assets/svgs/link.svg" class="clipboard-btn__icon">\n      <div class="clipboard-btn__text"></div>\n    </button>';$(this).append(n)})};$(document).ready(function(){c(),r(),o(),$(".chapter p").selectionSharer(),$(".chapter .content-img").baselineElement(32)})}();